ALTER TABLE b_pms_checkinuser ADD INDEX idx_checkinuser_cardid (cardid);

alter table b_pms_checkinuser add column isscan int(1) NULL COMMENT '是否ｐｍｓ扫描：1扫描  0非扫描';

ALTER TABLE `b_otaorder`
MODIFY COLUMN `Invalidreason`  int(3) NULL DEFAULT NULL COMMENT '拉新作废原因';

ALTER TABLE `t_city` ADD COLUMN `level`  int(1) NULL COMMENT '城市等级';

UPDATE `t_city` SET LEVEL=1 WHERE querycityname IN ('北京市',
'上海市',
'广州市',
'深圳市',
'武汉市',
'成都市',
'郑州市',
'重庆市',
'西安市',
'青岛市',
'济南市',
'天津市',
'沈阳市',
'南京市',
'大连市',
'杭州市',
'福州市',
'乌鲁木齐市',
'海口市',
'东莞市',
'长沙市',
'洛阳市');

UPDATE `t_city` SET LEVEL=2 WHERE querycityname IN ('漯河市',
'景德镇市',
'河源市',
'信阳市',
'赤峰市',
'黄石市',
'锦州市',
'莆田市',
'十堰市',
'赣州市',
'宿迁市',
'湛江市',
'驻马店市',
'菏泽市',
'曲靖市',
'岳阳市',
'眉山市',
'宁德市',
'茂名市',
'通辽市',
'丹东市',
'衡阳市',
'渭南市',
'揭阳市',
'遵义市',
'安阳市',
'巢湖市',
'邵阳市',
'黄山市',
'张家口市',
'马鞍山市',
'松原市',
'肇庆市',
'铜陵市',
'清远市',
'苏州市',
'合肥市',
'长春市',
'石家庄市',
'厦门市',
'太原市',
'哈尔滨市',
'烟台市',
'宁波市',
'潍坊市',
'淄博市',
'南宁市',
'兰州市',
'昆明市',
'无锡市',
'呼和浩特市',
'徐州市',
'临沂市',
'威海市',
'常州市',
'中山市',
'银川市',
'保定市',
'宜昌市',
'珠海市',
'桂林市',
'惠州市',
'廊坊市',
'淮安市',
'扬州市',
'三亚市',
'德州市',
'秦皇岛市',
'佛山市',
'蚌埠市',
'宝鸡市',
'包头市',
'西宁市',
'自贡市',
'淮北市',
'泉州市',
'淮南市',
'贵阳市',
'日照市',
'江门市',
'石河子市',
'滨州市',
'邯郸市',
'绵阳市',
'大庆市',
'商丘市',
'柳州市',
'南通市',
'盐城市',
'咸阳市',
'宜宾市',
'吉林市',
'济宁市',
'沧州市',
'南阳市',
'泰安市',
'汕头市',
'漳州市',
'汉中市',
'荆州市',
'萍乡市',
'芜湖市',
'九江市',
'梅州市',
'随州市',
'鞍山市',
'常德市',
'达州市',
'吉安市',
'榆林市',
'枣庄市',
'鄂尔多斯市',
'龙岩市',
'泸州市',
'焦作市',
'金华市',
'台州市',
'齐齐哈尔市',
'嘉兴市',
'牡丹江市',
'连云港',
'本溪市',
'葫芦岛市',
'温州市',
'乐山市',
'唐山市',
'襄阳市',
'许昌市',
'聊城市',
'凉山州',
'株洲市',
'阜阳市',
'开封市',
'东营市',
'泰州市',
'平顶山市',
'南昌市',
'娄底市');

UPDATE `t_city` SET LEVEL=3 WHERE querycityname IN ('庆阳市',
'南充市',
'衡水市',
'安庆市',
'德阳市',
'承德市',
'六安市',
'上饶市',
'湘潭市',
'大同市',
'北海市',
'内江市',
'新乡市',
'遂宁市',
'晋城市',
'四平市',
'长治市',
'永州市',
'莱芜市',
'鄂州市',
'濮阳市',
'镇江市',
'延边朝鲜族自治州',
'巴彦淖尔市',
'恩施州',
'韶关市',
'辽阳市',
'郴州市',
'宜春市',
'怀化市',
'邢台市',
'荆门市',
'资阳市',
'攀枝花市',
'宿州市',
'保山市',
'益阳市',
'营口市',
'绍兴市',
'佳木斯市',
'三明市',
'抚顺市',
'天水市',
'广安市',
'朔州市',
'咸宁市',
'池州市',
'喀什市',
'鹤壁市',
'安康市',
'西双版纳傣族自治州',
'盘锦市',
'晋中市',
'衢州市',
'孝感市',
'张掖市',
'鹰潭市',
'商洛市',
'阳泉市',
'黄冈市',
'丽水市',
'运城市',
'延安市',
'鸡西市',
'宣城市',
'楚雄市',
'毕节地区',
'铁岭市',
'阜新市',
'临汾市',
'周口市',
'朝阳市',
'三门峡市',
'阿克苏市',
'南平市',
'呼伦贝尔市',
'滁州市',
'湖州市',
'大理市',
'丽江市',
'玉林市',
'绥化市',
'忻州市',
'舟山市',
'抚州市',
'亳州市',
'梧州市',
'阳江市',
'广元市',
'巴中市',
'六盘水市',
'白城市',
'济源市',
'红河县',
'新余市',
'德宏德宏傣族景颇族自治州',
'伊犁哈萨克自治州',
'鹤岗市',
'贵港市',
'通化市',
'白银市',
'吕梁市',
'哈密市',
'石嘴山市',
'黔南州',
'白山市',
'乌海市',
'玉溪市',
'克拉玛依市',
'铜川市',
'乌兰察布盟',
'双鸭山市',
'黔东南州',
'钦州市',
'雅安市',
'平凉市',
'汕尾市',
'兴安盟',
'文山县',
'安顺市',
'库尔勒',
'铜仁地区',
'七台河市',
'吴忠市',
'贺州市',
'云浮市',
'河池市',
'湘西州',
'潮州市',
'防城港市',
'伊春市',
'百色市',
'张家界市',
'仙桃市',
'酒泉市',
'武威市',
'博尔塔拉蒙古自治州',
'阿勒泰市',
'巴音郭楞蒙古自治州',
'辽源市',
'中卫县',
'海西州',
'定西县',
'来宾市',
'黑河市',
'金昌市',
'昭通市',
'普洱哈尼族彝族自治县',
'大兴安岭',
'黔西南州',
'固原市',
'吐鲁番市',
'潜江市',
'天门市',
'五家渠',
'临沧县',
'塔城市',
'临夏州',
'嘉峪关市',
'崇左市',
'五指山',
'和田市',
'陇南地区',
'甘孜藏族自治州',
'海东地区',
'阿拉尔',
'阿拉善盟',
'阿坝藏族羌族自治州',
'甘南州',
'迪庆迪庆藏族自治州',
'神农架林区',
'克孜勒苏柯尔克孜自治州',
'怒江傈傈族自治州',
'海北州',
'图木舒克',
'玉树州',
'黄南州',
'果洛州',
'香港自治区',
'锡林郭勒盟',
'瓦房店',
'山南地区',
'日喀则地区',
'那曲地区',
'林芝地区',
'拉萨市',
'昌吉市',
'昌都地区',
'澳门自治区',
'阿里地区'
);

CREATE TABLE `t_promote_config` (
  `id` INT(20) NOT NULL AUTO_INCREMENT,
  `cityLevel` INT(1) DEFAULT NULL COMMENT '城市等级',
  `onlineGiveHotel` DECIMAL(10,2) DEFAULT NULL COMMENT '拉新返酒店',
  `offlineGiveHotel` DECIMAL(10,2) DEFAULT NULL COMMENT '拉新返酒店',
  `GiveNewMemberGeneral` DECIMAL(10,2) DEFAULT NULL COMMENT '新用户送通用券',
  `GiveNewMemberAppOnly` DECIMAL(10,2) DEFAULT NULL COMMENT '新用户送app专用券',

  `description` TEXT COMMENT '描述',
  `createTime` DATETIME DEFAULT NULL,
  `updateTime` DATETIME DEFAULT NULL,
  `createBy` VARCHAR(50) DEFAULT NULL,
  `updateBy` VARCHAR(50) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8;

insert into t_promote_config(citylevel,`onlineGiveHotel`,`offlineGiveHotel`,`GiveNewMemberGeneral`,`GiveNewMemberAppOnly`)
VALUES (1,20,10,30,30);

insert into t_promote_config(citylevel,`onlineGiveHotel`,`offlineGiveHotel`,`GiveNewMemberGeneral`,`GiveNewMemberAppOnly`)
VALUES (2,16,8,25,25);

insert into t_promote_config(citylevel,`onlineGiveHotel`,`offlineGiveHotel`,`GiveNewMemberGeneral`,`GiveNewMemberAppOnly`)
VALUES (3,12,6,20,20);


INSERT INTO `ots`.`b_activity` (
	`id`,
	`title`,
	`detail`,
	`description`,
	`type`,
	`begintime`,
	`endtime`,
	`limitget`,
	`hotel`,
	`banner`,
	`Iscollect`,
	`actState`,
	`expectNum`,
	`actualNum`,
	`expectMerchantNum`,
	`actualMerchantNum`,
	`isticket`,
	`gentype`,
	`promotionmethodtype`,
	`activeurl`,
	`activepic`,
	`activityCarrier`,
	`userGroup`,
	`isvisible`
)
VALUES
	(
		'110',
		'新用户优惠券',
		NULL,
		NULL,
		'5',
		'2015-11-11 00:00:00',
		'2015-12-31 23:59:59',
		'0',
		NULL,
		'',
		'T',
		'5',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'2',
		NULL,
		NULL,
		NULL,
		NULL,
		'T'
	);

INSERT INTO `ots`.`b_promotion` (`name`, `description`, `Createtime`, `Begintime`, `Endtime`, `type`, `isticket`, `num`, `info`, `classname`, `isota`, `otapre`, `activitiesid`, `note`, `pic`, `version`, `isinstance`, `weight`, `totalnum`, `plannum`, `protype`, `onlineprice`, `offlineprice`, `expiretype`, `expiredaynum`, `effectivetype`, `platformtype`, `sourcecdkey`, `channelid`, `strategy_id`)

VALUES ('洛阳长沙新用户优惠券', '洛阳长沙限在线支付使用', '2015-11-13 00:00:00', '2015-11-11 00:00:00', '2015-12-31 23:59:59', '1', 'T', '-1', '', 'com.mk.ots.ticket.service.parse.SimplesubTicket', 'T', '1.00', '110', '', '', '2', 'T', NULL, '6000', NULL, NULL, '30', '0', '2', '30', '1', '1', NULL, NULL, NULL);

INSERT INTO `ots`.`b_promotion_city` (`cityCode`, `cityName`, `activityId`, `delete`) VALUES ('-1', '全部', '110', 'F');