<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mk.ots.mapper.RoomSaleConfigInfoMapper">

	<resultMap id="BaseResultMap" type="com.mk.ots.roomsale.model.TRoomSaleConfigInfo">
	    <result property="id" column="id" />
	    <result property="saleTypeId" column="saleTypeId" />
	    <result property="startDate" column="startDate" />
        <result property="endDate" column="endDate" />
        <result property="startTime" column="startTime" />
        <result property="endTime" column="endTime" />
        <result property="saleValue" column="saleValue" />
        <result property="saleLabel" column="saleLabel" />
        <result property="description" column="description" />
        <result property="fontColor" column="fontColor" />
        <result property="valid" column="valid" />
        <result property="createTime" column="createTime" />
        <result property="createBy" column="createBy" />
        <result property="updateTime" column="updateTime" />
        <result property="updateBy" column="updateBy" />
	</resultMap>

    <sql id="Base_Column_List" >
        a.id, a.saleTypeId,a.startDate,a.endDate,a.startTime,a.endTime,a.saleValue,a.saleLabel,
        a.description,a.fontColor,a.valid,a.createTime,a.createBy,a.updateTime,a.updateBy
    </sql>

    <sql id="Base_Query_List" >
        <where>
            a.valid ='T'

            <if test="id != null">
                AND  a.id = #{id}
            </if>
            <if test="saleTypeId != null">
                AND a.saleTypeId = #{saleTypeId}
            </if>
            <if test="startDate != null">
                AND a.startDate = #{startDate}
            </if>
            <if test="endDate != null">
                AND a.endDate = #{endDate}
            </if>
            <if test="startTime != null">
                AND a.startTime = #{startTime}
            </if>
            <if test="endTime != null">
                AND a.endTime = #{endTime}
            </if>
            <if test="saleValue != null">
                AND a.saleValue = #{saleValue}
            </if>
            <if test="saleLabel != null">
                AND a.saleLabel = #{saleLabel}
            </if>
            <if test="description != null">
                AND a.description = #{description}
            </if>
            <if test="fontColor != null">
                AND a.fontColor = #{fontColor}
            </if>
        </where>
    </sql>

    <select id="queryListBySaleTypeId" resultMap="BaseResultMap" parameterType="java.util.Map">
        SELECT
        <include refid="Base_Column_List"/>
        FROM  t_room_sale_config_info a
        JOIN t_room_sale_city b on a.saleTypeId=b.saleTypeId
        <where>
              a.valid ='T'
            <if test="saleTypeId != null">
                AND a.saleTypeId = #{saleTypeId}
            </if>
            <if test="citycode != null and citycode != '' ">
                AND b.citycode = #{citycode}
            </if>
        </where>
        limit ${start} , ${limit}
    </select>

</mapper>
